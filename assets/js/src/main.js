// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    "use strict";
    var article_table, article_wrapper, category_tree, top;
    document.sticky_scrolling = true;
    document.category_column_index = 11;
    document.article_table_hidden_columns = [2, 6, 8, 9, 10];
    document.notification_handler = new NotificationHandler();
    document.language_handler = new LanguageHandler();
    document.category_tree = new CategoryTree($("#category_tree"));
    category_tree = document.category_tree;
    document.article_table = new ArticleTable($("#products"));
    article_table = document.article_table;
    article_table.initialize();
    category_tree.initialize();
    $("#articles-info").bind('click', function(event) {
      return $('#modal_articles').modal('toggle');
    });
    $('#help').bind('click', function(event) {
      return $('#modal_help').modal('toggle');
    });
    $('#category-info').bind('click', function(event) {
      return $('#modal_categories').modal('toggle');
    });
    article_wrapper = $('#article_wrapper');
    top = article_wrapper.offset().top - parseFloat(article_wrapper.css('marginTop').replace(/auto/, 0));
    article_wrapper.css('width', article_wrapper.width());
    $(window).scroll(function(event) {
      var y;
      if (!document.sticky_scrolling) {
        return false;
      }
      y = $(this).scrollTop();
      if (y >= top) {
        return article_wrapper.addClass('fixed');
      } else {
        return article_wrapper.removeClass('fixed');
      }
    });
    $('#sticky_scrolling').bind('click', function() {
      document.sticky_scrolling = !$(this).attr('checked') ? true : false;
      return true;
    });
    return $('#refresh').bind('click', function() {
      return window.location.href = window.location.href;
    });
  });

  $.countOccurences = function(array, search) {
    var counter, el, _i, _len;
    counter = 0;
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      el = array[_i];
      if (el === search) {
        counter++;
      }
    }
    return counter;
  };

  $.escapeId = function(string) {
    return string.replace(/\./g, "\\.");
  };

  $.urlParam = function(name) {
    var res, results;
    results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
    res = results != null ? results[1] : void 0;
    if (!res) {
      res = "";
    }
    return decodeURIComponent(res);
  };

  $.open_in_new_tab = function(url) {
    window.open(url, '_blank');
    return window.focus();
  };

}).call(this);
